<!DOCTYPE html>
<html lang="en-IE">
<head>
    <title>C# Cloud IDE</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <script type="module" src="js/wasmRunner.js"></script>
    <script type="module" src="js/app.js"></script>
    <!-- Using Prism.js for reliable syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-okaidia.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <link href="css/modal.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
</head>
<body>

<div class="container">
    <div style="display: flex; gap: 10px">
        <div class="child" style="width: 65%">
            <form style="margin-block-end: 0">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="padding-bottom: 8px; font-weight: 600;">
                        <svg aria-hidden="true" style="height: 16px" focusable="false" data-prefix="far" data-icon="code" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                            <path fill="var(--accent)" d="M399.1 1.1c-12.7-3.9-26.1 3.1-30 15.8l-144 464c-3.9 12.7 3.1 26.1 15.8 30s26.1-3.1 30-15.8l144-464c3.9-12.7-3.1-26.1-15.8-30zm71.4 118.5c-9.1 9.7-8.6 24.9 1.1 33.9L580.9 256 471.6 358.5c-9.7 9.1-10.2 24.3-1.1 33.9s24.3 10.2 33.9 1.1l128-120c4.8-4.5 7.6-10.9 7.6-17.5s-2.7-13-7.6-17.5l-128-120c-9.7-9.1-24.9-8.6-33.9 1.1zm-301 0c-9.1-9.7-24.3-10.2-33.9-1.1l-128 120C2.7 243 0 249.4 0 256s2.7 13 7.6 17.5l128 120c9.7 9.1 24.9 8.6 33.9-1.1s8.6-24.9-1.1-33.9L59.1 256 168.4 153.5c9.7-9.1 10.2-24.3 1.1-33.9z"></path>
                        </svg>
                        Code
                    </h3>
                    <div style="margin-top: -10px">
                        <button id="share" class="button-clear">
                            <svg height="14px" viewBox="0 0 16 16" width="14px" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" id="Icons with numbers" stroke="none" stroke-width="2"><g fill="var(--accent)" transform="translate(0.000000, -384.000000)">
                                <path d="M0,388 L6.75,388 L4.25,390 L2,390 L2,397 L12,397 L12,395 L14,393.4 L14,399 L0,399 Z M16,390 L11,394 L11,392.008289 C7.66738867,391.888001 5.66106768,393.37291 3.96685791,395.023071 C3.96685791,391.100747 7.46045937,388.011342 11,387.976794 L11,386 Z M16,390"/></g></g>
                            </svg>
                            Share
                        </button>
                        <button id="clear-code-editor" class="button-clear">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 6h18"></path>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                            Clear
                        </button>
                    </div>
                </div>
                <div class="editor-container">
                    <div class="line-numbers" id="line-numbers"></div>
                    <pre id="highlighted-code"><code class="language-csharp" id="highlighted-content"></code></pre>
                    <textarea autofocus id="code" name="code" spellcheck="false"></textarea>
                </div>
            </form>
            <button id="run" class="run">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                Run (Ctrl+Shift+B)
            </button>
        </div>
        <!--Console-->
        <div class="consoles" style="min-width: 40%; max-width: 40%">
            <div class="child console" style="margin-bottom: 10px">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <h3 style="margin: 0; font-weight: 600;">
                        <svg aria-hidden="true" style="height: 16px" focusable="false" data-prefix="far" data-icon="terminal" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                            <path fill="var(--accent)" d="M6.3 72.2c-9-9.8-8.3-24.9 1.4-33.9s24.9-8.3 33.9 1.4l184 200c8.5 9.2 8.5 23.3 0 32.5l-184 200c-9 9.8-24.2 10.4-33.9 1.4s-10.4-24.2-1.4-33.9L175.4 256 6.3 72.2zM248 432H552c13.3 0 24 10.7 24 24s-10.7 24-24 24H248c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path>
                        </svg>
                        Output
                    </h3>
                    <button id="clear-output-console" class="button-clear">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Clear
                    </button>
                </div>
                <div class="log-content" id="log-output"></div>
            </div>
            <div class="child console" style="width: 100%; min-width: 100%">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <h3 style="margin: 0; font-weight: 600;">
                        <svg aria-hidden="true" style="height: 16px" focusable="false" data-prefix="far" data-icon="terminal" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                            <path fill="var(--accent)" d="M6.3 72.2c-9-9.8-8.3-24.9 1.4-33.9s24.9-8.3 33.9 1.4l184 200c8.5 9.2 8.5 23.3 0 32.5l-184 200c-9 9.8-24.2 10.4-33.9 1.4s-10.4-24.2-1.4-33.9L175.4 256 6.3 72.2zM248 432H552c13.3 0 24 10.7 24 24s-10.7 24-24 24H248c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path>
                        </svg>
                        System
                    </h3>
                    <button id="clear-system-console" class="button-clear">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Clear
                    </button>
                </div>
                <div class="log-content" id="log-system"></div>
            </div>
        </div>
    </div>
</div>
<div class="status-bar">
    <div class="status-item">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <span>Ready</span>
    </div>
    <div class="status-item">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
        </svg>
        <span>C#</span>
    </div>
</div>
<!-- Modal -->
<div id="share-code-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Share this code</h2>
            <span class="close">&times;</span>
        </div>
        <div class="input-group">
            <input type="text" id="copyInput" value="">
            <button id="copyButton">
                <svg viewBox="0 0 24 24">
                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                </svg>
                Copy
            </button>
        </div>
    </div>
</div>

<!-- Toast notifications -->
<div class="toast" id="toast-copy">Copied to clipboard!</div>
<div class="toast" id="toast-save">Autosave is on, no need to save manually</div>
<script type="module">
    import { preload } from './js/wasmRunner.js';
    import { handleSavedState } from './js/app.js';
    
    //Runnable at page load
    handleSavedState();
    await preload();
</script>
<script type="text/javascript" src="js/logger.js"></script>
<script type="text/javascript" src="js/modal.js"></script>
<script type="text/javascript" src="js/encoding.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-csharp.min.js"></script>
</body>
</html>